<ion-header translucent>
  <ion-toolbar>
    <ion-title>Mi Perfil</ion-title>
    <ion-buttons slot="primary">
      <ion-icon [name]="ordenar? 'list' : 'list-box'" (click)="Ordenar()" style="font-size: 150%;"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content fullscreen> 
  <div class="contenedor" >
    <ion-avatar> 
      <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y" >
    </ion-avatar>
  </div>

  <div class="contenedor" >
    <ion-item style="width: 90%;">
      <ion-label style="font-size: xx-large; text-align: center;">
          {{nombre}}
      </ion-label>
    </ion-item>
  </div>
  
  <form [formGroup]="grupoForm"  (submit)="onSubmit()">
  
  <ion-list cdkDropListGroup
  >
    <mat-accordion multi="true">
      <mat-expansion-panel #pp 
        >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Publico
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div 
        cdkDropList
        [cdkDropListData]="publicoForm"
        (cdkDropListDropped)="drop($event)"
        class="acordion" formArrayName="publico">
          <div style="width: 100%;"
          *ngFor="let itemPublico of publicoForm.controls; let i = index"
          [formGroupName]="i"
          cdkDrag 
          [cdkDragDisabled]="ordenar"
          >
            <app-item-perfil  
            [form]="itemPublico"
            formControlName="item"
            [ordenando]="ordenar" 
            (eliminar)="EliminarElemento(itemPublico, publicoForm)">
            </app-item-perfil>
          </div>
          
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel  #pg  >
        <mat-expansion-panel-header>
          <mat-panel-title>
            General
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="acordion" 
        cdkDropList
        [cdkDropListData]="generalForm"
        (cdkDropListDropped)="drop($event)"formArrayName="general">
        <div style="width: 100%;"
        *ngFor="let itemPublico of generalForm.controls; let i = index"
        [formGroupName]="i"
        cdkDrag 
        [cdkDragDisabled]="ordenar"
        >
          <app-item-perfil 
          [form]="itemPublico"
          formControlName="item"
          [ordenando]="ordenar" 
          (eliminar)="EliminarElemento($event, generalForm)">
          </app-item-perfil>
        </div>
        
      </div>
      </mat-expansion-panel>
      
      <mat-expansion-panel  #pper  
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Personal
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="acordion" 
        cdkDropList
        [cdkDropListData]="personalForm"
        (cdkDropListDropped)="drop($event)"formArrayName="personal">
        <div style="width: 100%;"
        *ngFor="let itemPublico of personalForm.controls; let i = index"
        [formGroupName]="i"
        cdkDrag 
        [cdkDragDisabled]="ordenar"
        >
          <app-item-perfil 
          [form]="itemPublico"
          formControlName="item"
          [ordenando]="ordenar" 
          (eliminar)="EliminarElemento(itemPublico, personalForm)">
          </app-item-perfil>
        </div>
        
      </div>
      </mat-expansion-panel>
      
      <mat-expansion-panel  #ppro  
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Profesional
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="acordion" 
        cdkDropList
        [cdkDropListData]="profesionalForm"
        (cdkDropListDropped)="drop($event)"formArrayName="profesional">
        <div style="width: 100%;"
        *ngFor="let itemPublico of profesionalForm.controls; let i = index"
        [formGroupName]="i"
        cdkDrag 
        [cdkDragDisabled]="ordenar"
        >
          <app-item-perfil 
          [form]="itemPublico"
          formControlName="item"
          [ordenando]="ordenar" 
          (eliminar)="EliminarElemento($event, profesionalForm)">
          </app-item-perfil>
        </div>
        
      </div>
      </mat-expansion-panel>
    </mat-accordion>
  </ion-list>
  </form>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed"  >
      <ion-fab-button size="small" (click)="SeleccionSeccion()">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>
    <ion-fab vertical="bottom" horizontal="start" slot="fixed"  >
        <ion-fab-button size="small"  color="success" (click)="onSubmit()">
          <ion-icon name="save"></ion-icon>
        </ion-fab-button>
      </ion-fab>
</ion-content>


